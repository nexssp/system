const{execSync:execSync}=require("child_process"),{existsSync:existsSync}=require("fs"),defaultOptions={};function debugOutput(e,s,n,t){console.log(t?"\nResult WITH STDERR:":`\nResult WITHOUT STDERR:\nExecuted: ${e}\nOptions: `,s,`process.cwd(): ${process.cwd()}`,"\nSTDOUT:\n",n,"|END STDOUT"),t&&console.error(t)}function nSpawn(e,s={}){var{parseArgsStringToArgv:n}=require("string-argv");const[t,...o]=n(e);if(nSpawn.debug&&(console.log("command:",e),console.log("cmd:",t),console.log("args:",o)),"win32"!==process.platform&&Object.assign(s,{shell:process.shell}),s.cwd&&!existsSync(s.cwd))return new Error("Folder passed to 'nSpawn' does not exist.");let r="";"win32"===process.platform&&"nexss"===t&&(r=".cmd");let c="",l=0;s.stdio="pipe";try{c=execSync(`${e} --nxsPipeErrors`,s).toString()}catch(e){c=e.stdout.toString(),dtderr=e.stderr.toString(),l=e.status}return nSpawn.debug&&debugOutput(e,s,c,""),{exitCode:l,stdout:c,stderr:""}}"win32"!==process.platform&&Object.assign(defaultOptions,{shell:process.shell}),nSpawn.debug=!0,module.exports={nSpawn:nSpawn};